<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Med'z Laundry Shop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="assets/style.css">
</head>
<body>
    <header>
        <nav class="nav">
            <div class="nav-brand">
                <img src="assets/images/LOGO.jpeg">
                <div class="brand-text-main">
                    <a href="index.html">MED'Z LAUNDRY SHOP</a>
                </div>
            </div>
            <div class="nav-links">
                <a href="home.html">Home</a>
                <a href="about.html">About</a>
                <a href="service.html">Service</a>
                <a href="overview.html">Overview</a>
                <a href="inquiry.html">Inquiry</a>
                <a href="booking.html" class="active">Booking</a>
            </div>
            <div class="nav-cta">
                <a href="#" class="btn btn-accent" id="btn-header-login">owner login</a>
            </div>
            </div>
        </nav>
    </header>
    <main class="page">
        <section id="booking">
            <h2 class="section-title" style="align-content: center;">Booking</h2>
            <div class="section-tagline">PICKUP OR DROP OFF SCHEDULE</div>
            <div class="form-grid">
                <div class="form-card">
                    <div class="form-title">Book your next laundry day</div>
                    <div class="form-subtitle">
                        Fill out the form so we can prepare a slot and confirm your schedule via SMS or call.
                    </div>
                    <form id="form-booking">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="book-name">Full Name</label>
                                <input type="text" id="book-name" name="name" placeholder="Juan Dela Cruz" required />
                            </div>
                            <div class="form-group">
                                <label for="book-phone">Mobile Number</label>
                                <input type="tel" id="book-phone" name="phone" placeholder="09XX-XXX-XXXX" required />
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="book-date">Preferred Date</label>
                                <input type="date" id="book-date" name="date" required />
                            </div>
                            <div class="form-group">
                                <label for="book-time">Preferred Time</label>
                                <input type="time" id="book-time" name="time" required />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="book-type">Service Type</label>
                            <select id="book-type" name="type" required>
                                <option value="">Select service</option>
                                <option>Wash </option>
                                <option>Dry</option>
                                <option>Fold</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="book-kilos">Estimated Kilos</label>
                            <input type="number" id="book-kilos" name="kilos" min="1" step="1" placeholder="e.g. 6" />
                            <div class="form-hint">
                                If unsure, you can leave this blank. We will weigh at the shop.
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="book-notes">Notes or special instructions</label>
                            <textarea id="book-notes" name="notes" placeholder="Example: Separate uniforms, baby clothes, or white items."></textarea>
                        </div>
                        <div class="form-footer">
                            <button type="submit" class="btn btn-accent">Submit Booking</button>
                            <div class="form-note">
                                We will confirm your slot manually via SMS or call.
                            </div>
                        </div>
                    </form>
                </div>
                <div class="form-card">
                    <div class="form-title">Pickup & Delivery Reminders</div>
                    <ul class="overview-steps">
                        <li class="overview-step">
                            <div class="step-number">1</div>
                            <div>
                                <div class="step-title">Pack your laundry securely</div>
                                <div class="step-text">
                                    Use a laundry bag or durable plastic bag. Avoid open baskets to keep clothes safe during pickup.
                                </div>
                            </div>
                        </li>
                        <li class="overview-step">
                            <div class="step-number">2</div>
                            <div>
                                <div class="step-title">Separate special items</div>
                                <div class="step-text">
                                    Put delicates, baby clothes, or “do not tumble dry” items in a separate bag and mention them in the notes.
                                </div>
                            </div>
                        </li>
                        <li class="overview-step">
                            <div class="step-number">3</div>
                            <div>
                                <div class="step-title">Make sure someone is home</div>
                                <div class="step-text">
                                    For pickups and deliveries, ensure a contact person is available during the scheduled time.
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </section>
    </main>
    <footer>
        &copy; <span>Med'z Laundry Shop</span>
    </footer>

    <script src="config.js"></script>
    <script type="module">
      import {
        initializeApp
      } from 'https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js';
      import {
        getAuth,
        onAuthStateChanged
      } from 'https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js'
      import {
        getDatabase,
        ref,
        push
      } from 'https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js'

      const app = initializeApp(window.FIREBASE_CONFIG);
      const auth = getAuth(app)
      const db = getDatabase(app)

      onAuthStateChanged(auth, (user) => {
        const el = document.getElementById('btn-header-login')

        if (user) {
          el.innerHTML = 'Dashboard'
          el.href = 'admin-inquiry-records.html'
        } else {
          el.innerHTML = 'Owner Login'
          el.href = 'login.html'
        }
      })

      const bookingRef = ref(db, 'bookings')

      const form = document.getElementById('form-booking')
      const name = document.getElementById("book-name")
      const phone = document.getElementById("book-phone")
      const date = document.getElementById("book-date")
      const time = document.getElementById("book-time")
      const type = document.getElementById("book-type")
      const kilos = document.getElementById("book-kilos")
      const notes = document.getElementById("book-notes")

      form.addEventListener('submit', (e) => {
        e.preventDefault()

        push(bookingRef, {
          name: name.value,
          phone: phone.value,
          date: date.value,
          time: time.value,
          type: type.value,
          kilos: kilos.value,
          notes: notes.value,
        }).then(() => {
          alert('Booking Sent!')
          form.reset()
        })
      })
    </script>
</body>
</html>
